# basic info
CMAKE_MINIMUM_REQUIRED(VERSION 3.1.0)
PROJECT(scatter CXX)
SET(CMAKE_CXX_STANDARD 14)

# out dir
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

SET(HOME /data/home/Eplistical)
INCLUDE_DIRECTORIES(${HOME}/include)
INCLUDE_DIRECTORIES(${HOME}/code/Ccode/include)
LINK_DIRECTORIES(${HOME}/code/Ccode/lib)
LINK_DIRECTORIES(${HOME}/lib ${HOME}/lib64)

# openmp
FIND_PACKAGE(OpenMP)
IF(OpenMP_FOUND)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}")
ELSE (OpenMP_FOUND)
    MESSAGE(STATUS "OpenMP not found")
ENDIF(OpenMP_FOUND)

# MPI lib
FIND_PACKAGE(MPI)
IF(MPI_FOUND)
    MESSAGE(STATUS "MPI found: ${MPI_COMPILER}")
    INCLUDE_DIRECTORIES(${MPI_INCLUDE_PATH})
ELSE (MPI_FOUND)
    MESSAGE(STATUS "MPI not found")
ENDIF(MPI_FOUND)

# mkl lib
SET(MKLROOT $ENV{MKLROOT})
INCLUDE_DIRECTORIES(${MKLROOT}/include)
LINK_DIRECTORIES(${MKLROOT}/lib/intel64)
SET(MKL_LIBRARIES m dl pthread  mkl_intel_lp64 mkl_intel_thread mkl_core iomp5)

# debug/release
IF(DEBUG)
    SET(CMAKE_BUILD_TYPE Debug)
    MESSAGE(STATUS "version: debug")
    ADD_DEFINITIONS(-D_DEBUG)
ELSE(DEBUG)
    SET(CMAKE_BUILD_TYPE Release)
ENDIF(DEBUG)

ADD_SUBDIRECTORY(rem)
ADD_SUBDIRECTORY(surfaces)
ADD_SUBDIRECTORY(grid)
ADD_SUBDIRECTORY(simulation)
ADD_SUBDIRECTORY(io)
